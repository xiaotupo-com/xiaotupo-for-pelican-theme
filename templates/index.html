{% extends "base.html" %}

{% block title %}{{ SITENAME }}111{%endblock%}


{% block content %}
{% if articles %} {# 判断是否有文章 #}
{% for article in articles_page.object_list %} {# 遍历文章 #}

{# 只有一篇文章 #}
{% if loop.first and not articles_page.has_previous() %}
<!-- 第一篇文章 -->
<section id="first-post">
  <article>
    <h1 class="entry-title"><a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h1>
    {% include 'article_infos.html' %}
    {{ article.content }}
    {% include 'comments.html' %}
  </article>
</section>
{# 大于一篇文章 #}
{% if loop.length > 1 %}
<!-- 除第一篇文章的其他文章 -->
<section id="content" class="body">
  <h1>Other articles</h1>
  <hr />
  <ol id="posts-list" class="hfeed">
    {% endif %}
    {# other items #}
    {% else %}
    {% if loop.first %}
    <section id="content" class="body">
      <ol id="posts-list" class="hfeed" start="{{ articles_paginator.per_page -1 }}">
        {% endif %}
        <li>
          <article class="hentry">
            <header>
              <h1><a href="{{ SITEURL }}/{{ article.url }}" rel="bookmark"
                  title="Permalink to {{ article.title|striptags }}">{{ article.title }}</a></h1>
            </header>

            <div class="entry-content">
              {% include 'article_infos.html' %}
              {{ article.summary }}
              <a class="readmore" href="{{ SITEURL }}/{{ article.url }}">阅读更多</a>
              {% include 'comments.html' %}
            </div><!-- /.entry-content -->
          </article>
        </li>
        {% endif %}
        {% if loop.last %}
        {% if loop.length > 1 or articles_page.has_other_pages() %}
      </ol><!-- /#posts-list -->
      {% if articles_page.has_other_pages() %}
      {% include 'pagination.html' %}
      {% endif %}
    </section><!-- /#content -->
    {% endif %}
    {% endif %}
    {% endfor %}
    {% else %}
    <section id="content" class="body">
      {% if pages %}
      <h2>Pages</h2>
      <ul>
        {% for page in pages %}
        <li><a href="{{ SITEURL }}/{{ page.url }}">{{ page.title }}</a></li>
        {% endfor %}
      </ul>
      {% else %}
      <p>This site currently has no content.</p>
      {% endif %}
    </section>
    {% endif %}
    {% endblock content %}

    {# 侧栏 #}
    {% block sidebar %}
    {% include 'sidebar.html' %}
    {% endblock sidebar %}